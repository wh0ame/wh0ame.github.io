{"ast":null,"code":"import _objectSpread from\"C:/Users/Ivan/Desktop/DeplomMain/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useCallback}from'react';import{supabase}from'../supabaseClient';import{useNavigate,Link}from'react-router-dom';import'../styles/ProfilePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProfilePage(){const[user,setUser]=useState(null);const[profile,setProfile]=useState(null);const[favoriteApartments,setFavoriteApartments]=useState([]);const[loading,setLoading]=useState({profile:true,apartments:true});const[isEditing,setIsEditing]=useState(false);const[editData,setEditData]=useState({username:'',full_name:'',phone:''});const navigate=useNavigate();// Получение данных пользователя\nconst fetchUserData=useCallback(async()=>{try{setLoading(prev=>_objectSpread(_objectSpread({},prev),{},{profile:true}));const{data:{user},error:authError}=await supabase.auth.getUser();if(authError||!user){navigate('/auth');return;}setUser(user);const{data:profileData,error:profileError}=await supabase.from('profiles').select('*').eq('id',user.id).single();if(profileError&&profileError.code!=='PGRST116')throw profileError;const profile=profileData||{id:user.id,username:user.email.split('@')[0],full_name:'',phone:''};setProfile(profile);setEditData({username:profile.username,full_name:profile.full_name,phone:profile.phone});}catch(error){console.error('Ошибка загрузки профиля:',error);}finally{setLoading(prev=>_objectSpread(_objectSpread({},prev),{},{profile:false}));}},[navigate]);// Получение избранных квартир\nconst fetchFavoriteApartments=useCallback(async()=>{if(!(user!==null&&user!==void 0&&user.id))return;try{setLoading(prev=>_objectSpread(_objectSpread({},prev),{},{apartments:true}));// 1. Получаем ID избранных квартир\nconst{data:favorites,error:favError}=await supabase.from('user_favorites').select('apartment_id').eq('user_id',user.id);if(favError)throw favError;if(!favorites||favorites.length===0){setFavoriteApartments([]);return;}// 2. Получаем полные данные квартир\nconst{data:apartments,error:aptError}=await supabase.from('apartments').select('*').in('id',favorites.map(f=>f.apartment_id));if(aptError)throw aptError;setFavoriteApartments(apartments||[]);}catch(error){console.error('Ошибка загрузки избранных квартир:',error);}finally{setLoading(prev=>_objectSpread(_objectSpread({},prev),{},{apartments:false}));}},[user]);useEffect(()=>{fetchUserData();},[fetchUserData]);useEffect(()=>{if(user){fetchFavoriteApartments();}},[user,fetchFavoriteApartments]);const handleEditChange=e=>{const{name,value}=e.target;setEditData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleEditSubmit=async e=>{e.preventDefault();try{setLoading(prev=>_objectSpread(_objectSpread({},prev),{},{profile:true}));const updates=_objectSpread(_objectSpread({},editData),{},{id:user.id,updated_at:new Date().toISOString()});const{data,error}=await supabase.from('profiles').upsert(updates).eq('id',user.id).select().single();if(error)throw error;setProfile(data);setIsEditing(false);alert('Данные успешно сохранены!');}catch(error){console.error('Ошибка сохранения:',error);alert(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(error.message));}finally{setLoading(prev=>_objectSpread(_objectSpread({},prev),{},{profile:false}));}};const toggleFavorite=async apartmentId=>{try{const{error}=await supabase.from('user_favorites').delete().eq('user_id',user.id).eq('apartment_id',apartmentId);if(error)throw error;setFavoriteApartments(prev=>prev.filter(apartment=>apartment.id!==apartmentId));}catch(error){console.error('Ошибка при удалении из избранного:',error);}};const signOut=async()=>{try{await supabase.auth.signOut();navigate('/auth');}catch(error){console.error('Ошибка при выходе:',error);}};if(loading.profile){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"home-link\",children:\"\\u2190 \\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041C\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:signOut,className:\"logout-button\",children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"}),!isEditing?/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(true),className:\"edit-button\",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(false),className:\"cancel-button\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]}),isEditing?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEditSubmit,className:\"edit-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:editData.username,onChange:handleEditChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"full_name\",value:editData.full_name,onChange:handleEditChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",value:editData.phone,onChange:handleEditChange,pattern:\"[0-9]{10,15}\",title:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430 (10-15 \\u0446\\u0438\\u0444\\u0440)\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-button\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user===null||user===void 0?void 0:user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F:\"}),\" \",(profile===null||profile===void 0?void 0:profile.username)||'Не указано']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F:\"}),\" \",(profile===null||profile===void 0?void 0:profile.full_name)||'Не указано']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"}),\" \",(profile===null||profile===void 0?void 0:profile.phone)||'Не указано']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"apartments-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041C\\u043E\\u0438 \\u043A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440\\u044B\"}),loading.apartments?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0441\\u043F\\u0438\\u0441\\u043A\\u0430 \\u043A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440...\"}):favoriteApartments.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-apartments\",children:\"\\u0412\\u044B \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0438\\u043B\\u0438 \\u043A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440\\u044B \\u0432 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0435\"}):/*#__PURE__*/_jsx(\"div\",{className:\"apartments-grid\",children:favoriteApartments.map(apartment=>/*#__PURE__*/_jsxs(\"div\",{className:\"apartment-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:apartment.src||'/default-apartment.jpg',alt:apartment.title,className:\"apartment-image\",onError:e=>{e.target.onerror=null;e.target.src='/default-apartment.jpg';}}),/*#__PURE__*/_jsxs(\"div\",{className:\"apartment-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:apartment.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[apartment.price.toLocaleString(),\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"apartment-features\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u041A\\u043E\\u043C\\u043D\\u0430\\u0442: \",apartment.rooms]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0411\\u0430\\u0441\\u0441\\u0435\\u0439\\u043D: \",apartment.has_pool?'✓':'✗']}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u041E\\u0431\\u0441\\u043B\\u0443\\u0436\\u0438\\u0432\\u0430\\u043D\\u0438\\u0435: \",apartment.has_service?'✓':'✗']})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleFavorite(apartment.id),className:\"favorite-button active\",children:\"\\u2605 \\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0438\\u0437 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0433\\u043E\"})]},apartment.id))})]})]});}export default ProfilePage;","map":{"version":3,"names":["React","useEffect","useState","useCallback","supabase","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","ProfilePage","user","setUser","profile","setProfile","favoriteApartments","setFavoriteApartments","loading","setLoading","apartments","isEditing","setIsEditing","editData","setEditData","username","full_name","phone","navigate","fetchUserData","prev","_objectSpread","data","error","authError","auth","getUser","profileData","profileError","from","select","eq","id","single","code","email","split","console","fetchFavoriteApartments","favorites","favError","length","aptError","in","map","f","apartment_id","handleEditChange","e","name","value","target","handleEditSubmit","preventDefault","updates","updated_at","Date","toISOString","upsert","alert","concat","message","toggleFavorite","apartmentId","delete","filter","apartment","signOut","className","children","to","onClick","onSubmit","type","onChange","required","pattern","title","src","alt","onError","onerror","price","toLocaleString","rooms","has_pool","has_service"],"sources":["C:/Users/Ivan/Desktop/DeplomMain/src/pages/ProfilePage.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { supabase } from '../supabaseClient';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport '../styles/ProfilePage.css';\r\n\r\nfunction ProfilePage() {\r\n  const [user, setUser] = useState(null);\r\n  const [profile, setProfile] = useState(null);\r\n  const [favoriteApartments, setFavoriteApartments] = useState([]);\r\n  const [loading, setLoading] = useState({\r\n    profile: true,\r\n    apartments: true\r\n  });\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editData, setEditData] = useState({\r\n    username: '',\r\n    full_name: '',\r\n    phone: ''\r\n  });\r\n  const navigate = useNavigate();\r\n\r\n  // Получение данных пользователя\r\n  const fetchUserData = useCallback(async () => {\r\n    try {\r\n      setLoading(prev => ({ ...prev, profile: true }));\r\n      \r\n      const { data: { user }, error: authError } = await supabase.auth.getUser();\r\n      if (authError || !user) {\r\n        navigate('/auth');\r\n        return;\r\n      }\r\n\r\n      setUser(user);\r\n\r\n      const { data: profileData, error: profileError } = await supabase\r\n        .from('profiles')\r\n        .select('*')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n      if (profileError && profileError.code !== 'PGRST116') throw profileError;\r\n\r\n      const profile = profileData || {\r\n        id: user.id,\r\n        username: user.email.split('@')[0],\r\n        full_name: '',\r\n        phone: ''\r\n      };\r\n\r\n      setProfile(profile);\r\n      setEditData({\r\n        username: profile.username,\r\n        full_name: profile.full_name,\r\n        phone: profile.phone\r\n      });\r\n    } catch (error) {\r\n      console.error('Ошибка загрузки профиля:', error);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, profile: false }));\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Получение избранных квартир\r\n  const fetchFavoriteApartments = useCallback(async () => {\r\n    if (!user?.id) return;\r\n\r\n    try {\r\n      setLoading(prev => ({ ...prev, apartments: true }));\r\n      \r\n      // 1. Получаем ID избранных квартир\r\n      const { data: favorites, error: favError } = await supabase\r\n        .from('user_favorites')\r\n        .select('apartment_id')\r\n        .eq('user_id', user.id);\r\n\r\n      if (favError) throw favError;\r\n      if (!favorites || favorites.length === 0) {\r\n        setFavoriteApartments([]);\r\n        return;\r\n      }\r\n\r\n      // 2. Получаем полные данные квартир\r\n      const { data: apartments, error: aptError } = await supabase\r\n        .from('apartments')\r\n        .select('*')\r\n        .in('id', favorites.map(f => f.apartment_id));\r\n\r\n      if (aptError) throw aptError;\r\n      \r\n      setFavoriteApartments(apartments || []);\r\n    } catch (error) {\r\n      console.error('Ошибка загрузки избранных квартир:', error);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, apartments: false }));\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    fetchUserData();\r\n  }, [fetchUserData]);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchFavoriteApartments();\r\n    }\r\n  }, [user, fetchFavoriteApartments]);\r\n\r\n  const handleEditChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setEditData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleEditSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setLoading(prev => ({ ...prev, profile: true }));\r\n      \r\n      const updates = {\r\n        ...editData,\r\n        id: user.id,\r\n        updated_at: new Date().toISOString()\r\n      };\r\n\r\n      const { data, error } = await supabase\r\n        .from('profiles')\r\n        .upsert(updates)\r\n        .eq('id', user.id)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      \r\n      setProfile(data);\r\n      setIsEditing(false);\r\n      alert('Данные успешно сохранены!');\r\n    } catch (error) {\r\n      console.error('Ошибка сохранения:', error);\r\n      alert(`Ошибка: ${error.message}`);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, profile: false }));\r\n    }\r\n  };\r\n\r\n  const toggleFavorite = async (apartmentId) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('user_favorites')\r\n        .delete()\r\n        .eq('user_id', user.id)\r\n        .eq('apartment_id', apartmentId);\r\n      \r\n      if (error) throw error;\r\n      \r\n      setFavoriteApartments(prev => \r\n        prev.filter(apartment => apartment.id !== apartmentId)\r\n      );\r\n    } catch (error) {\r\n      console.error('Ошибка при удалении из избранного:', error);\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      await supabase.auth.signOut();\r\n      navigate('/auth');\r\n    } catch (error) {\r\n      console.error('Ошибка при выходе:', error);\r\n    }\r\n  };\r\n\r\n  if (loading.profile) {\r\n    return <div className=\"loading\">Загрузка профиля...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile-page\">\r\n      <div className=\"profile-header\">\r\n        <Link to=\"/\" className=\"home-link\">← На главную</Link>\r\n        <h2>Мой профиль</h2>\r\n        <button onClick={signOut} className=\"logout-button\">\r\n          Выйти\r\n        </button>\r\n      </div>\r\n      \r\n      <div className=\"profile-section\">\r\n        <div className=\"section-header\">\r\n          <h3>Личные данные</h3>\r\n          {!isEditing ? (\r\n            <button \r\n              onClick={() => setIsEditing(true)} \r\n              className=\"edit-button\"\r\n            >\r\n              Редактировать\r\n            </button>\r\n          ) : (\r\n            <button \r\n              onClick={() => setIsEditing(false)} \r\n              className=\"cancel-button\"\r\n            >\r\n              Отмена\r\n            </button>\r\n          )}\r\n        </div>\r\n        \r\n        {isEditing ? (\r\n          <form onSubmit={handleEditSubmit} className=\"edit-form\">\r\n            <div className=\"form-group\">\r\n              <label>Имя пользователя:</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"username\"\r\n                value={editData.username}\r\n                onChange={handleEditChange}\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label>Полное имя:</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"full_name\"\r\n                value={editData.full_name}\r\n                onChange={handleEditChange}\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label>Телефон:</label>\r\n              <input\r\n                type=\"tel\"\r\n                name=\"phone\"\r\n                value={editData.phone}\r\n                onChange={handleEditChange}\r\n                pattern=\"[0-9]{10,15}\"\r\n                title=\"Номер телефона (10-15 цифр)\"\r\n              />\r\n            </div>\r\n            <button type=\"submit\" className=\"save-button\">\r\n              Сохранить\r\n            </button>\r\n          </form>\r\n        ) : (\r\n          <div className=\"profile-info\">\r\n            <p><strong>Email:</strong> {user?.email}</p>\r\n            <p><strong>Имя пользователя:</strong> {profile?.username || 'Не указано'}</p>\r\n            <p><strong>Полное имя:</strong> {profile?.full_name || 'Не указано'}</p>\r\n            <p><strong>Телефон:</strong> {profile?.phone || 'Не указано'}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <div className=\"apartments-section\">\r\n        <h3>Мои квартиры</h3>\r\n        {loading.apartments ? (\r\n          <div className=\"loading\">Загрузка списка квартир...</div>\r\n        ) : favoriteApartments.length === 0 ? (\r\n          <p className=\"no-apartments\">Вы пока не добавили квартиры в избранное</p>\r\n        ) : (\r\n          <div className=\"apartments-grid\">\r\n            {favoriteApartments.map(apartment => (\r\n              <div key={apartment.id} className=\"apartment-card\">\r\n                <img \r\n                  src={apartment.src || '/default-apartment.jpg'} \r\n                  alt={apartment.title}\r\n                  className=\"apartment-image\"\r\n                  onError={(e) => {\r\n                    e.target.onerror = null;\r\n                    e.target.src = '/default-apartment.jpg';\r\n                  }}\r\n                />\r\n                <div className=\"apartment-info\">\r\n                  <h4>{apartment.title}</h4>\r\n                  <p className=\"price\">{apartment.price.toLocaleString()} ₽</p>\r\n                  <div className=\"apartment-features\">\r\n                    <span>Комнат: {apartment.rooms}</span>\r\n                    <span>Бассейн: {apartment.has_pool ? '✓' : '✗'}</span>\r\n                    <span>Обслуживание: {apartment.has_service ? '✓' : '✗'}</span>\r\n                  </div>\r\n                </div>\r\n                <button \r\n                  onClick={() => toggleFavorite(apartment.id)}\r\n                  className=\"favorite-button active\"\r\n                >\r\n                  ★ Удалить из избранного\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfilePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}